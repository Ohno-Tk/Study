# 資格勉強_AWS Certified Cloud Practitioner

## 目次
* [視聴したコンテンツ](#contentsWatch)
* [AWSとは？](#contents1)
* [クラウドとAWSの概要](#contents2)
* [クラウドの基礎](#contents3)
* [AWSサービスの概要](#contents4)
* [AWSのグローバルインフラ構成](#contents5)
* [オンプレミスとAWSクラウドの良し悪し](#contents6)
* [AWSの操作](#contents7)
* [EC2](#contents8)
* [EBS](#contents9)
* [サブネットとサブネットマスク](#contents10)
* [VPC](#contents11)
* [通信プロトコルとOSIモデル](#contents12)
* [ネットワークACLとセキュリティグループ](#contents13)


<a id="contentsWatch"></a>

## 視聴したコンテンツ
* [【CLF-C02版】これだけでOK! AWS認定クラウドプラクティショナー試験突破講座（豊富な試験問題300問付き）](https://persolpt-eng.udemy.com/course/ok-aws-e/)

## AWSとは？
<a id="contents1"></a>

インフラやアプリ開発に必要な機能がいつでも、どこでも即時に利用できるクラウドサービスのこと。

オンプレサーバとの違い
* 数分で立ち上がる  
オンプレは時間がかかる

* 無料で利用可能  
オンプレはコストがかかる

**物理的な危機をネットサービスへ**  
システム運用に必要な物理機器をインターネット経由で借りてくることで、  
効率的なシステム管理が可能になる。

**サービスが豊富**  
システム構築・運用に必要なサービスが一通りそろっており、  
200以上のサービスから容易に組み合わせて利用できる。

**最先端の技術**  
AI・ブロックチェーン・量子コンピュータ・AR・VRなどの最先端技術がクラウドで提供され、すぐに利用できる。

**グローバルに展開**  
グローバルなインフラ(物理的なIT機器)を有しており、日本にいながら世界中にITインフラを構築できる。

## クラウドとAWSの概要
<a id="contents2"></a>

### 仮想化を理解する
クラウドは仮想化技術によって成り立っている。  

仮想化とは、物理的なインフラ構成を隠して、「1つのインフラ機器を複数」または「複数のインフラ機器」を1つに見せかける(仮想)する技術のこと

**仮想化の仕組み**  
物理的なインフラに仮想化ソフトウェアを設定して、仮想化範囲を複数のユーザに切り分けて提供することができる。つまり、1つの物理機器をみんなでシェアできる。  

仮想化ソフトウェアの例
* ホスト側(VMWARE)
* ハイパーバイザ型

**仮想化の対象**
* サーバの仮想化
  * 1代の物理サーバ上に複数のOSを動作させる技
  * ハイパーバイザ型/ホスト型/コンテナ方式
* ストレージの仮想化
  * 複数のストレージを仮想的に統合して1つの大きなストレージプールを構成する技術
  * ブロックレベル仮想化/ファイルレベル仮想化
* ネットワークの仮想化
  * 新たな仮想ネットワークの構築や制御を、ソフトウェアにより動的に実施する技術
  * SDN/VLAN
* デスクトップの仮想化
  * サーバ上においたPC環境のデスクトップ画面を遠隔地にある接続端末に転送する技術
  * 仮想PC方式/ブレードPC方式

**仮想化のメリット**  
仮想化を利用する事でインフラ利用の効率性や柔軟性が圧倒的に向上する

* 仮想化の主なメリット
  * サーバスペースの削減
  * データセンター費用の削減
  * 効率的なサーバ利用によるコスト削減
  * 物理的な機器を調達するのではなく、仮想化によりサーバ領域を分割提供することによる調達の迅速化
  * 構成変更やメンテナンス対応の柔軟性
  * セキュリティの向上

**コンテナ**  
コンテナは、ホストマシン(仮想化のホストとなる物理機器)のカーネルを利用し、プロセスなどを隔離する仮想化方式

**SDI**  
SDI(Software-Defined Infrastructure)はソフトウェアによってコードによりインフラ構成を実現する機能  
JSON/YAMLなどのコードでインフラ構築方式がポリシーとして定義されており、それに基づいて仮想化インフラが構築可能

<a id="contents3"></a>

### クラウドの基礎
**クラウドとは**  
必要に応じて他社所有のハードウェア・ソフトウェア等をネットワークを介して利用するシステム利用形態  

こんな時はクラウドに...  
* 短期的なキャンペーン用に一時的にサーバが欲しい。
* 需要増に応じサーバを増強し、需要減には削減したい。
* 今すぐデータベースが必要だけど調達している時間がない。

**クラウドの構成要素**  
クラウドで提供されるシステム構成要素はインフラ、ミドルウェア、アプリケーションの3層
* インフラ
  * 物理的な機器(ハードウェア)
  * ネットワーク回線
* ミドルウェア
  * ミドルウェアとは共通利用される機能をまとめたソフトウェア
  * Windowsなどの基本ソフト(OS：オペレーティングシステム)
* アプリケーション
  * プログラミング開発したアプリケーション
  * 業務機能が実装されたパッケージングソフトウェア

**クラウドの5つの基本特性**  
クラウドの特徴として「5つの基本特性」「3つのサービス「3つの提供形態」がある。

* 5つの基本特性
  * オンデマンド・セルフサービス  
  利用者は人を介さず、必要に応じてサーバ・ネットワーク・ストレージを設置・拡張・設定が可能
  * 幅広いネットワークアクセス  
  ネットワークを通してPC、スマホ、タブレットなど各種デバイスから利用可能
  * リソースの共有  
  ハードウェアの使用容量などのリソースは複数利用者により共有し、利用者の需要に応じて動的に割り当てる。物理的配置は考慮不要
  * 迅速な拡張性  
  ハードウェア等の資源は必要に応じて自動または主導で増やしたり、減らしたりできる。
  * サービスは計測可能  
  稼働状況が常に計測されており、利用状況をコントロール・最適化できる。  
  計測結果に応じて従量課金が必要。

* 3つのサービス形態
  * SaaS  
  クラウド事業者がアプリケーションまで提供  
  自社はすぐにアプリケーションを利用可能
  * PaaS  
  クラウド事業者がミドルウェアまで提供  
  自社はアプリケーション開発に専念
  * IaaS  
  クラウド事業者が、ハードウェア提供  
  自社でミドルウェア・OSを購入し、アプリケーション開発

* 3つの提供形態  
クラウド提供形態はプライベート型とパブリック型が主流。  
加えて両方を併用するハイブリット型の提供形態がある。

  * オンプレミス(自社所有)
    * 所有形態：自社所有
    * 特徴：ハードウェア/ソフトウェアを購入し、自社にシステムを構築
    * メリット：自社でハードウェアを自由にコントロール可能
    * デメリット：調達・構築に時間を要す。  
    運用管理に人材・コストを要す。

  * プライベートクラウド
    * 所有形態：自社所有
    * 特徴：自社内にクラウド基盤を構築し、ハードウェア・ソフトウェアを事業部や子会社間で共同利用
    * メリット：自社資産の効率化。パブリックと比較しコントロールが自由
    * デメリット：クラウド運用管理が難しく、クラウドのメリットが低下

  * パブリッククラウド
    * 所有形態：他社所有
    * 特徴：ハードウェア/ソフトウェアを他社と共同利用し、柔軟に構築。解除が可能
    * メリット：運用管理を他社に委任可能。  
    システム調達・構築の自由度が高い。
    * デメリット：自社コントロールの範囲が制限

<a id="contents4"></a>

### AWSサービスの概要
**AWSの仕組み**  
インフラ/システム機能をブロックパーツの様にオンライン上に組み合わせて自分の好きな構成を実現する仕組み

<a id="contents5"></a>

### AWSのグローバルインフラ構成
リージョンとアベイラビリティゾーン(AZ)とエッジロケーションを中心に世界中にDCを展開している。

**リージョン**
リージョンはデータセンターが集積された地理的なロケーションの事  
日本には東京と大阪の2つのリージョンが存在している。

* データセンターが集積されている世界中の物理的ロケーションの事。
* AWSでは、北米、南米、欧州、中国、アジアパシフィック、南アフリカ、中東などのリージョンを含む、複数の地理的なリージョンを整備している。
* リージョンに応じて価格と利用可能なサービスが少し異なる。
* 各AWSリージョンは、1つの地理的エリアにある、隔離され物理的にも分離された複数のAZによって構成される。
* 1つのリージョンにはユーザが利用可能なAZが2つ以上構成されている。

**アベイラビリティゾーン**  
アベイラビリティゾーンは1つ以上のデータセンターで構成された論理的なデータセンターのグループ

* 1つのAWSリージョン内でそれぞれ切り離され、冗長的な電力源、ネットワーク、そして接続機能を備えている1つ以上のデータセンターであり、論理的データセンターのグループ
* AZは1つ以上のデータセンターで構成されており、AWSリソースを提供するサーバが設置されている。
* AZによって、単一のデータセンターでは実現できない高い可用性、耐障害性、および拡張性を備えた本番用システムの運用が可能になる。
* 各AZには個別の電力源、冷却システム、物理的セキュリティが備わっており、AZ間は冗長で低レイテンシーなネットワークを介し接続されている。
* アプリケーションからAZ間で分割されている場合は停電、落雷、竜巻、地震などの問題からより安全に隔離され保護される。
* 同じリージョンにある各AZハソレゾレホカノAZから物理的に意味のある距離(数キロメートル)があるものの、お互いは100km(60マイル)以内に配置されている。

**エッジロケーション**  
グローバルなコンテンツ配信に利用されるロケーションのこと

* AWSのAZを構成するデータセンターとは別にコンテンツ配信を実行する高速・広帯域なネットワークロケーションの事。
* 600以上のPOP(Point Of Persence)とリージョナルエッジキャッシュで構成されており、全世界にエッジロケーション設備が展開されている。
* ユーザに近いロケーションにキャッシュサーバを設置して、キャッシュ(一時保存用データ)を保存することで、頻繁にアクセスされやすいデータへの配信を高速化することが出来る。

**AWSローカルゾーン**  
レイテンシーの影響を受けやすいapplicationを炎でユーザにより近い場所で実行するためのロケーション

* 1桁ミリ秒単位のレイテンシー(ユーザのアクションとその後の応答の間に経過する時間)を要求する革新的なアプリケーションに対して、ユーザからの引きレイテンシーアクセスを実現するための特別なロケーションの事。
* リージョンから距離がある大都市(人口の多い場所や産業の中心地)の近くに配置されており、高速アプリケーションを展開することが出来る。
* コンピューティング、ストレージ、データベース、およびその他の選択されたAWSのサービスをエンドユーザに近い場所に配置できる。
* ローカルとAWSリージョンでそれぞれ実行中のワークロード間で高速域幅かつ安全な接続が利用できる。

**Wavelength Zone**  
5Gネットワークを利用した高速アプリケーションを開発できるロケーションの事。

* 5Gネットワークのエッジにある通信proぱいだーのデータセンターに、AWSのコンピューティング及びストレージサービスを組み込んだAWSインフラストラクチャのデプロイ可能なロケーション
* モバイルデバイスおよびエンドユーザに対して10ミリ秒未満のレイテンシーを実現するアプリケーションを構築できる。
* ゲーム、ライブ動画ストリーミング、エッジでの機械学習推論、拡張現実やバーチャルリアリティ(AR/VR)など、10ミリ秒未満のレイテンシーが必要なアプリケーションを実現

<a id="contents6"></a>

### オンプレミスとAWSクラウドの良し悪し
**クラウドのメリット/デメリット**  
迅速に柔軟にリソースを活用できるクラウドの明っとに対して、ベンダーロックインという最大のデメリットがある。

* メリット
  * オンデマンドでリソースを柔軟に迅速に活用することができる。
  * オンプレミス環境とのハイブリッドやオンプレミス環境にAWSクラウドサービスを展開する事も可能
  * 下手に自社DC内でインフラを構成するよりも、AWSに依存した方がよっぽどセキュリティは高い
* デメリット
  * クラウド業者のサービスに依存してしまうベンダーロックイン
  * データ保存先や活用で社内での保管が義務付けられている等、クラウド環境が利用できない

**ベンダーロックインとは？**  
AWS独自のサーバレスの仕組みをアプリに組み込んで機能開発してしまうと、環境移行が困難になる。

<a id="contents7"></a>

## AWSの操作
AWSの操作は3つ
* AWSマネジメントコンソール  
WEB画面からAWSを設定できるGUIツール
* インスタンス操作(SSH等)  
設置したインスタンス(サーバ)の操作はWindowsサーバやLinuxサーバなどに準じたソフトウェアを利用
* AWS CLI操作  
コマンドラインから複数のAWSサービスを制御・管理することが可能

<a id="contents8"></a>

# AWSのコアサービス
## EC2
**EC2とは何か？**  
オンプレミス環境にあるサーバと同じ性能を盛ったサーバをインターネット上で瞬時に作成することが出来るサービス

**EC2の特徴**  
数分で利用可能となる従量課金(時間～秒単位)で利用可能な仮想サーバ
* 起動される仮想サーバの単位をインスタンスと呼ぶ
* 起動・ノード追加・削除・マシンスペック変更できる仮想サーバを提供する
* WindowsやLinuxなどのほとんどのOSをサポート
* OSまでは提供されているタイプを選択することで自動設定され、OSより上のレイヤーをユーザが自由に利用する
* インスタンスの設定データはイメージという形式でAmazon Machine Image(AMI)に保存される。  
AMIはインスタンスの設定を保存したり、起動したりできる。
* EC2内部の関連機能としてEBS・ELB・Auto Scalingが含まれている。  

EC2では様々なOSを選択したうえで、CPU、メモリ、ストレージなどの性能を選択して、仮想サーバを起動することが出来る。
* オペレーティングシステムとしてのイメージの選択
* インスタンスタイプの設定
  * CPUのクロック数とコア数
  * メモリ容量
* ストレージタイプと容量
  * ネットワークディスク(EBS)
  * 物理ディスク(インスタンスストア)
* セキュリティグループによりトラフィックを制御

**EC2の利用コスト**  
EC2はインスタンスタイプや購入方式に応じて価格が決定する。
* 購入方式  
購入形式に応じて様々な利用料金が設定されている
  * オンデマンド：通常価格
  * リザーブド/Saving Plan：予約と事前支払の割引を適用
  * スポットインスタンス：最大90%割引を適用
* インスタンスタイプに応じた料金設定
  * インスタンスタイプに応じて価格が決定される。  
  利用時間によって価格を決定する。
  * a1.mediumは0.0255USD/時間
* 時間課金の設定
  * 秒単位(最低60秒)で支払う
  * 1秒利用すると60秒分の課金が発生する
  * EBSも同様に秒単位で課金される。
* リージョン
  * リージョンごとにインスタンスの価格が異なる。
* データ転送
  * データ転送イン(外部からデータを受信する処理)：無料
  * インターネットへのデータ転送アウト(外部へとデータを送信する処理)(GBあたり)
  * S3からAWS内でのデータ転送アウト(GBあたり)
* ボリューム
  * アタッチされたEBSに保存されたデータ容量にも課金される。インスタンスを停止してもEBS分の課金が継続されるために注意が必要。
  * インスタンスストアには課金されない。
* Running/開始/再起動
  * 実行時間に応じて料金が発生する。
  * 利用中のEBSボリュームの料金が発生する。
* 停止/Stop
  * EC2の料金発生は停止する。
  * 利用中のEBSボリュームの料金が発生する。
* 終了/Terminate
  * EC2の料金発生は停止する。
  * デフォルト設定ではルートボリュームに設定されたEBSボリュームも削除され、料金発生は停止する。
  * ただし、EBSは削除されない設定もできる。その場合はEBSボリュームの料金が継続する。

**ユーザデータの利用**  
ユーザデータを利用してEC2インスタンス起動時に実行されるスクリプトを設定できる。
* ユーザデータ
  * ユーザデータにスクリプトを設定することで、EC2インスタンス起動時に詳細設定が自動化される。
  * Bashスクリプトなど利用して、インスタンス起動時の設定を記述することが出来る。
* ブートストラップ
  * インスタンスにユーザデータを渡すことで、起動時に実行される処理の事

**ストレージの選択(ルートボリューム)**  
EC2で直接利用するストレージはホストサーバと不可分で設定されるインスタンスストアとユーザが追加するEBSの2つのタイプがある

* インスタンスストア
  * ホストコンピュータに内蔵されたディスクでEC2と不可分のブロックレベルの物理ストレージ
  * EC2の一時的なデータが保持され、EC2の停止・終了と共にデータは消去される
  * 無料

* Elastic Block Store(EBS)
  * ネットワークで接続されたブロックレベルのストレージでEC2とは独立して管理される
  * EC2をTerminate(停止)してもEBSはデータを保持可能。  
  また、バックアップとしてSnapshotをS3に保存する。
  * 別途EBS料金が必要

**ストレージの選択(オプション)**  
オプションでファイルシステム(ファイル形式のストレージ)を構成する事もできる。

* Amazon EFS
  * NASに似たファイルストレージ
  * ファイルシステムとして利用し、複数のEC2インスタンスでの共有アクセスが可能

* Amazon FSx For Windows File Server
  * Windows File Serverと互換性のあるストレージ
  * Windows上に構築され、Windows AD、OSやソフトウェアとの連携が豊富に可能

**物理対応可能なインスタンス**  
物理サーバにインスタンスを起動して制御が可能なタイプのインスタンス

* Dedicated Instance(ハードウェア専有インスタンス)
  * 専用HWのVPCで実行されるEC2インスタンス
  * ホストHWのレベルで、他のAWSアカウントに属するインスタンスから物理に分離する
  * 同じAWSアカウント内の別ユーザのインスタンスとホストサーバを共有する可能性がある

* Dedicated Host
  * 仮想サーバ利用時のホストサーバを完全に特定のユーザ専用にして、他のユーザと共有しない。
  * 物理サーバに紐づけられたソフトウェアライセンスを利用することができる。

* Bare Metal
  * 基盤となるサーバのプロセッサとメモリに直接アクセス可能なインスタンス
  * AWSの各種サービスとの連携が可能でOSが直接下層のハードウェアにアクセスができる。

<a id="contents9"></a>

## EBS
**EBSとは何か？**  
EBSはEC2インスタンスと共に利用されるブロックストレージ。  
インスタンス上で実行されるワークロードのデータ処理に利用。

**EBSの選択**  
AWSは3つの形式のストレージサービスを提供。

* ブロックストレージ
  * EC2にアタッチして活用するディスクサービス
  * ブロック形式でデータを保存
  * 高速・広帯域幅
  * 例：EBS、インスタンスストア

* オブジェクトストレージ
  * 安価かつ高い耐久性をもつオンラインストレージ
  * オブジェクト形式でデータを保存
  * デフォルトで複数AZに冗長化されている。
  * 例：S3、Glacier

* ファイルストレージ
  * 複数のEC2インスタンスから同時にアタッチ可能な共有ストレージサービス
  * ファイル形式でデータを保存
  * 例：EFS

EC2が利用するのはインスタンスストアとEBSの2タイプのストレージ

* インスタンスストア
  * ホストコンピュータに内蔵されたディスクでEC2と不可分のブロックレベルの物理ストレージ
  * EC2の一時的なデータが保持され、EC2の停止・終了と共にデータがクリアされる
  * 無料

* Elastic Block Store(EBS)
  * EC2にはネットワーク接続されたブロックレベルのストレージ、EC2とは独立で管理される。
  * EC2を終了してもEBSデータは保持可能。
  * SnapshotをS3に保持可能。
  * 別途EBS料金が必要。

**スナップショットの管理**  
スナップショットの作成時にはストレージを静止することが推奨されているものの、いつでもバックアップを実行可能で、EBS操作に影響を与えない。DLMによりバックアップ取得期間を設定可能

* スナップショット作成時はデータ整合性を保つため静止することが推奨
  * ソフトウェアの機能を利用
  * ファイルシステムの機能を利用
  - バックアップソフトウェアの機能を利用
  - アプリケーションの停止
  - ファイルシステムのアンマウントなど

* 保存期間や世代数は無制限
* 世代管理が必要な場合はAWS CLIやAPIなどで自動化する
* Amazon DLMを利用してEBSボリュームのスナップショット取得をスケジューリングできる。

**EBSボリュームの削除**  
EC2インスタンスの削除と共にEBSは削除されるため、データを保持したい場合は設定変更が必要

* ルートボリュームのEBS
  * EBS^backed AMIインスタンスにはルートボリュームにEBSが利用されている。
  * デフォルト設定ではEC2インスタンスの削除と共にEBSボリュームも削除される。

* DeleteOnTermination属性
  * DeleteOnTermination属性を有効化しているとEC2インスタンスの削除に応じてEBSも削除される
  * 非有効化することで、EC2インスタンスを削除してもEBSボリュームのみ保持可能

**EBSの暗号化**  
EBSはKMSのCMKを利用して、ボリューム作成時とスナップショット作成時に暗号化を実施する。

* EBSの暗号化
  * EBSボリュームやスナップショット作成時、AWS KMSのカスタマーマスターキー(CMK)を使用して暗号化を実施
  * インスタンスとそれに接続されたEBSストレージ間のデータ転送と保存データの両方に対して暗号化を実施する。

* 暗号化対象
  * ボリューム内の保存データ
  * ボリュームとインスタンスの間の転送データ
  * ボリュームから作成された全てのスナップショット
  * それらのスナップショットから作成された全てのボリューム

**EBSとRAID構成**  
パフォーマンス向上と冗長化を高める目的で、EBSでは主にRAID0とRAID1の構成が実施される

* RAID0(ストライピング)
  * 目的：パフォーマンスを向上させる。
  * RAID0は、2つ以上のボリュームを1台のボリュームに合わせてパフォーマンスを向上させる。
  * 複数ボリュームを合わせたパフォーマンスになる。

* RAID1(ミラーリング)
  * 目的：ボリュームの冗長性を高める。
  * RAID1では複数のボリュームに同時にデータを書き込むため、片方が壊れても、片方にデータが残る。

<a id="contents10"></a>

## サブネットとサブネットマスク
**IPアドレスとサブネットマスク**  
IPアドレスは3桁(0~255)の数字を4つ組み合わせる。  
各桁が8つのバイナリ値の集合を表す。

【表記方法】10.0.0.255

サブネットマスクは、IPアドレス表記の後に/数値で付属している

【表記方法】10.0.0.255 **/24**

**CIDR(Classless Inter-Domain Routing)**  
サブネットマスクにより、2進数表記でサブネット内で利用できないIP範囲がロックされる。  
サブネットでは、それ以外がIPアドレスとして利用できる。

【表記方法】10.0.0.255 **/8**  
00001010⇒ロック

【表記方法】10.0.0.255 **/16**  
00001010⇒ロック  
00000000⇒ロック

/16ではロックされていない16桁分のビット数が有効なIPアドレスとして活用できる。

**ネットワーク部とホスト部**  
サブネットマスクによって固定される範囲をネットワーク部、利用可能な範囲をホスト部と呼ぶ

**サブネットによるグループ化**  
サブネットマスクによるグループ化されたアドレス範囲内をサブネットと呼ぶ

<a id="contents11"></a>

### VPC
**VPCとは何か？**  
VPCはAWSクラウドのネットワークからユーザ専用の領域を切り出す事が出来る仮想ネットワークのサービス

**Virtual Private Cloud**  
VPCはAWSクラウド内に論理的に分離されたセクションを作り、ユーザが定義した仮想ネットワークを構築するサービス

* リージョン内に5つまでVPCを設定可能(上限緩和申請可能)
* 任意のIPアドレス範囲(CIDR)を選択して仮想ネットワークを構築
  * 最小サイズは/28
  * 最大サイズは/16
* VPCはプライベートIPアドレスによってネットワークレンジを設定
* サブネットの作成、ルートテーブルやネットワークゲートウェイの設定などにより、仮想ネットワーキング環境を完全に制御できる。
* 必要に応じてクラウド内外のネットワーク同士を接続したり、外部のネットワークと接続することが可能

**デフォルトVPC**  
AWSアカウントを作成すると、自動的に各リージョンに1つずつデフォルトVPCとデフォルトサブネットが生成される。

* デフォルトでIPv4 CIDRブロック(172.31.0.0/16)のVPCを作成する。  
これは、最大65,536個のプライベートIPv4アドレスを提供する。
* 各アベイラビリティゾーンに、サイズ/20のデフォルトサブネットを作成する。  
この場合、サブネットあたり最大4,096個のアドレスが作成される。
* インターネットゲートウェイを作成して、デフォルトVPCに接続する。
* デフォルトのセキュリティグループを作成し、デフォルトVPCに関連づける。
* デフォルトVPCを備えたAWSアカウントにはデフォルトDHCPオプションセットを関連づける。
* パブリックとプライベートのDNSホスト名が付与される。

【用語解説】  
デフォルトDHCPオプションセット：VPC内に関連付けるDHCP関連の設定の事。VPC内で起動したインスタンスにこの設定が反映される。  
DHCP："Dynamic Host Configuration Protocol"の略称でTCP/IPネットワークのホストに設定情報を渡す。

**サブネット**  
サブネットはCIDRで分割したVPCのネットワークセグメント

**サブネットのレンジ**  
VPCとサブネットにはCIDR(IPアドレス範囲)が付与され、ネットワーク範囲が決まる。

**ゲートウェイの設定**  
VPCコンソールで作成・管理できるゲートウェイは以下の通り

* インターネットゲートウェイ
  * インターネットへの出入り口となるゲートウェイ
  * デフォルトゲートウェイとして利用されることが多い。
  * インターネットゲートウェイをVPCに1つ設置する。

* NATゲートウェイ
  * プライベートサブネットのリソースからインターネットへのトラフィックを可能にするためのゲートウェイ
  *プライベートアドレスをパブリックアドレスに変換して、インターネットゲートウェイに連携される。

* Egress-Only Internet GateWay
  * IPv6向けのインターネットゲートウェイ
  * IPv6経由でのVPCからインターネットへの送信を可能にし、インターネットからのインスタンスへの接続は防ぐ。

* カスタマーゲートウェイ
  * オンプレミス環境と接続する際に利用するゲートウェイ
  * カスタマーゲートウェイデバイスまたはソフトウェアアプリケーションに関する情報をAWSに提供する。

* 仮想プライベートゲートウェイ
  * 仮想プライベートゲートウェイは、VPNトンネルのAmazon側にあるルータ
  * VPN接続時に利用する。

**VPCにおけるDNSの使用**  
VPC内で起動したインスタンスがパブリックIPアドレスを利用するためにはDNSホスト名を取得する必要がある。

* enableDnsHostnames
  * パブリックIPアドレスを持つインスタンスが、対応するパブリックDNSホスト名を取得するかどうか示す。
  * この属性がtrueでenableDnsSupport属性もtrue場合、VPC内のインスタンスはDNSホスト名を取得する。

* enableDnsSupport
  * DNS名前解決がサポートされているかどうかを示す
  * この属性がfalseの場合、パブリックDNSホスト名をIPアドレスに解決するAmazon Route 53 Resolverサーバが機能しない。
  * この属性がtrueの場合、Amazonが提供するDNSサーバ(IPアドレス 169.254.169.253)へのクエリ、またはリザーブドIPアドレス(VPC IPv4ネットワークの範囲に2をプラスしたアドレス)へのクエリは成功する。

【用語解説】  
DNS名前解決：IPアドレスとURLなどを紐づけしてIPアドレスの行き先を探し出す事。

**VPCエンドポイント**  
VPCエンドポイントはインターネットを介さずにVPC内からVPC外のリソースに対してアクセスするための機能

ゲートウェイ型はS3とDynamoDBのみに適用される。他の多くのAWSサービスはプライベートリンク型(インターフェース)を利用する。

* ゲートウェイ型エンドポイント
  * サポートされたAWSサービスに対するトラフィックの宛先として指定できるゲートウェイ
  * ルートテーブルにトラフィック処理を設定して通信する。
  * DynamoDBとAmazon S3のみに適用可能

* プライベートリンク型エンドポイント(インターフェース型)
  * サポートされたAWSサービスに対するトラフィックのエントリポイントとして機能するプライベートIPアドレスを持つElastic Network Interface
  * プライベートIPアドレスを使用して外部サービスに対してプライベートにアクセスする。
  * AWS PrivateLinkは、VPCとサービス間のすべてのネットワークトラフィックをAmazonネットワークに制限
  * RDS、EC2などの多くのAWSサービスに適用可能
  * 2022年よりAmazon S2に対応、DynamoDBは未対応

**AWS PrivateLink**  
インターフェースエンドポイントを利用したプライベート接続を実施するサービス

* インターネットを経由せずVPCとAWSサービス、またはオンプレミス間にプライベート接続を確立する接続ポイント機能。(そのため、インターフェースエンドポイントはプライベートリンク型とも呼ばれる。)
* VPCの外部にあるサービス用に、インタフェースVPCエンドポイントを作成する。
* 他のAWSユーザからのアカウント内のAWSサービスへのアクセスを可能にする。
* AWS Direct Connectを使用したプライベート接続にも対応して、オンプレミスのアプリケーションからAWSリソースにプライベートネットワークを経由して接続できる。

**VPC Peering**  
VPC Peeringにより2つのVPCを接続して、トラフィックルーティングが可能となる。

* 異なるAWSアカウント間のVPC間をピア接続可能
* 一部のリージョン間の異なるVPC間をピア接続可能
* 単一障害点や帯域幅のボトルネックは存在しない

**トランジットゲートウェイ**  
トランジットゲートウェイを軸にハブ型の接続が可能となる。

**VPCとのオンプレミス接続**  
* AWS Direct Conect
  * オンプレミス環境からAWSプライベートネットワークへの専用線接続を作成する。
  * 専用線接続には外部ネットワークプロバイダーを利用して、Direct Connectロケーションでの物理接続が必要となる。

* AWS VPN
  * AWSサイト間VPN
    * オンプレミス環境からAWSプライベートネットワークへのVPN接続を作成する。

  * AWS Client VPN
    * クライアントからのVPN接続を実施するリモート接続用のサービス
    * オンプレミスとAWS両方のアプリケーションへの安全なアクセスを提供

**VPNとのDirect Connect**  
VPNの方が安く素早く利用できるが、信頼性や品質は専用線が勝る

* サイト間VPN
  * コスト：安価なベストエフォート回線が利用可能
  * リードタイム：クラウド上での接続設定で可能なため即時
  * 帯域幅：暗号化のオーバーヘッドにより制限がある
  * 品質セキュリティ
    * インターネット経由のためネットワーク状態の影響を受ける
    * ipsecによる通信暗号化
  * 障害切り分け：インターネットベースのため自社で保持している範囲以外の確認は難しい

* Direct Connect
  * コスト：キャリアの専用線サービス契約が必要となりVPNより割高
  * リードタイム：物理対応が必要ななため一カ月ほどの準備時間が必要
  * 帯域幅：ポートあたり1Gbps、10Gbpxまたは100Gbpまでの広帯域を実現
  * 品質セキュリティ
    * キャリアにより高い品質
    * 専用線によるセキュリティが高く、+VPNにより通信を暗号化可能
  * 障害切り分け：物理的に経路が確保されているため比較的容易

<a id="contents12"></a>

## 通信プロトコルとOSIモデル
**通信のルール**  
IPアドレスによって送付先の住所が分かっても、その中の誰に送信するのかも分からないといけないよね？

**通信プロトコル**  
HTTP(Hyper Text Transfer Ptorotocol)はHTML(Hyper Text Markup Language)で書かれた文章などの情報をやりとりする時に使われるプロトコル

**OSI参照モデル**  
この通信プロトコルを性質や送信対象に応じて、7つの層に分けているのがOSI参照モデルと呼ばれる規約

* アプリケーション層
  * WEBアプリケーションの通信サービスが実現できるよう固有の規定を定義
  * この中でアプリケーションごとにプロトコルが細分化されている
    * メールソフトウェア用プロトコル  
    ⇒ POP/SMTP
    * WEBブラウザ用プロトコル  
    ⇒ HTTP/HTTPS

* プレゼンテーション層
  * 文字の送り方を決めている所  
  文字コード・圧縮・データ暗号/復号など
  * 送信側と受信側のコンピュータで使用している氷原形式が異なっても、世界中でWEBサイトが表示されるのはこのため。

* セッション層
  * アプリケーション間でのセッションの確率、維持、終了するまでの手順を規定
  * セッションとはアプリケーションと通信した際の一連の継続的な処理やつながりの事。

* トランスポート層
  * ノード間のデータ伝送におけるコネクションを確立して、アプリケーション間でセッションを開始するためのポート番号の割り当てを規定
  * TCPを利用して、到着順序や到着確認を実施
    * コネクション：セッションでデータ転送を行うための論理的な回線の事
    * セッション：通信の開始から終了までを管理する1つの単位の事

* ネットワーク層
  * ノード間の起点から終点までの通信を規定
  * IPアドレスを利用した割り当てや、ルータによる宛先のコンピュータまでの最適なパスを選択してデータを送信などを実施

* データリンク層
  * 1つのネットワーク回線上で直接接続されたノード同士の通信について規定
  * LANではイーサネットにより同じネットワークセグメント内におけるノード間の通信をMACアドレスを利用して実施

* 物理層
  * ネットワークの物理的な接続や伝送方式を規定プロトコル
  * 0と1のビット列を電気信号に変換しネットワークへ伝送する方法など

**TCP/IPモデル**  
TCP/IPモデルはさらに実務的な処理にまとめたプロトコル群のこと。  
これを利用してプロトコル通信が設定されることが多い。

**ポート番号**  
通信する出入口となるのがポート番号で、メールボックスのような役割を担っている。

* 21：FTP  
ファイル転送用のプロトコル通信を実施

* 22：SSH  
Linuxマシンに接続する際のセキュアな接続を実施

* 80：HTTP  
非暗号化されたWEBサイトへの通信

* 443：HTTPS  
暗号化されたWEBサイトへの通信

* 3389：RDP  
Windowsサーバへのセキュアな接続を実施  
リモートデスクトップによる接続方式

* 3306：RDS  
Amazon RDSのDBインスタンスへのセキュアな接続を実施

<a id="contents13"></a>

## ネットワークACLとセキュリティグループ
**セキュリティグループ**  
インスタンスへのトラフィックのアクセス可否を設定するファイアーウォール機能を提供

**ネットワークACL**  
VPCとサブネットへのトラフィックのアクセス可否を設定するファイアーウォール機能を提供

VPC内のリソースにアクセスする際はセキュリティグループとNACLの両方の許可設定が必要

**NACLとSGの比較**  
セキュリティグループはネットワークACLは似たような機能だが、性質が異なる。

* セキュリティグループ設定
  * インスタンス単位で適用
  * 特定のVPCに紐づいて作成
  * ステートフル：インバウンドのみ設定すればアウトバウンドも許可される。(状態を維持)
  * 許可のみをIn/outで指定
  * デフォルトは全インバウンドが設定なし(暗黙の拒否設定)、アウトバウンドが許可される。
  * 全てのルールを適用

* ネットワークACLs設定
  * VPC/サブネット単位で適用
  * ステートフル：インバウンド設定だけではアウトバウンドは許可されない。
  * 許可と拒否をIn/outで指定
  * デフォルトでは全ての通信を許可する設定
  * 番号の順序通りに適用するため、重複したプロトコルに設定されている場合は小さな番号が優先される。

**ネットワークACL**  
デフォルトNACL(VPC作成時に自動的に作成されるACL)とカスタム(ユーザが作る)ACLのデフォルト初期設定では異なる設定がされている。

* VPC最初に設定されるデフォルトNACL
  * 全てのインバウンドトラフィックを許可する設定がされている。
  * 全てのアウトバウンドトラフィックを許可する設定がされている。

* カスタムで作成するNACLのデフォルト設定
  * 全てのインバウンドトラフィックを拒否する設定がされている。
  * 全てのアウトバウンドトラフィックを拒否する設定がされている。

**エフェメラルポートの利用**  
NACLを利用してサブネット内のリソースと通信をする際は特定ポート番号に加えエフェメラルポートの設定が必要

## Route53
**概要**

## AWSアーキテクチャの設計原則

## ELB
**概要**

## S3
**概要**

## RDB
**概要**

## AWSコスト管理

